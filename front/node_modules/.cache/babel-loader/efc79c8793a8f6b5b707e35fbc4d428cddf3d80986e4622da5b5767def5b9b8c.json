{"ast":null,"code":"// rule-based advisory generator\nexport function generateAdvisories(forecastList) {\n  // forecastList is an array of { dt, dt_txt, temp, humidity, pop, wind_speed }\n  // We'll analyze the next 6 hours (two 3-hour blocks) and overall trends\n\n  const adv = new Set();\n\n  // helper stats\n  const temps = forecastList.map(f => f.temp);\n  const hums = forecastList.map(f => f.humidity);\n  const pops = forecastList.map(f => f.pop);\n  const winds = forecastList.map(f => f.wind_speed);\n  const maxTemp = Math.max(...temps);\n  const avgHum = hums.reduce((s, x) => s + x, 0) / hums.length;\n  const maxPop = Math.max(...pops);\n  const maxWind = Math.max(...winds);\n\n  // Rules (at least 5)\n  if (maxPop > 0.6) adv.add('High rain probability (>60%): Avoid irrigation and pesticide spraying today.');\n  if (maxTemp > 35) adv.add('High temperature (>35°C): Increase irrigation frequency for heat-sensitive crops.');\n  if (maxWind > 15) adv.add('Strong winds (>15 km/h): Do not spray pesticides due to drift risk.');\n  if (avgHum > 80) adv.add('High humidity (>80%): Monitor crops for possible fungal infections.');\n\n  // Good spraying window: next 6 hours no rain and wind <10\n  const next6 = forecastList.slice(0, 2); // two 3-hour blocks\n  const rainIn6 = next6.some(f => f.pop > 0.2);\n  const windIn6 = next6.some(f => f.wind_speed >= 10);\n  if (!rainIn6 && !windIn6) adv.add('Good spraying window in next 6 hours: low wind and low rain chance.');\n\n  // Additional recommendation: irrigation scheduling\n  if (maxTemp > 30 && avgHum < 40) adv.add('Heat + low humidity: Consider morning irrigation to reduce evapotranspiration.');\n  return Array.from(adv);\n}","map":{"version":3,"names":["generateAdvisories","forecastList","adv","Set","temps","map","f","temp","hums","humidity","pops","pop","winds","wind_speed","maxTemp","Math","max","avgHum","reduce","s","x","length","maxPop","maxWind","add","next6","slice","rainIn6","some","windIn6","Array","from"],"sources":["D:/gramiq/front/src/utils/advice.js"],"sourcesContent":["// rule-based advisory generator\r\nexport function generateAdvisories(forecastList) {\r\n// forecastList is an array of { dt, dt_txt, temp, humidity, pop, wind_speed }\r\n// We'll analyze the next 6 hours (two 3-hour blocks) and overall trends\r\n\r\n\r\nconst adv = new Set();\r\n\r\n\r\n// helper stats\r\nconst temps = forecastList.map((f) => f.temp);\r\nconst hums = forecastList.map((f) => f.humidity);\r\nconst pops = forecastList.map((f) => f.pop);\r\nconst winds = forecastList.map((f) => f.wind_speed);\r\n\r\n\r\nconst maxTemp = Math.max(...temps);\r\nconst avgHum = hums.reduce((s, x) => s + x, 0) / hums.length;\r\nconst maxPop = Math.max(...pops);\r\nconst maxWind = Math.max(...winds);\r\n\r\n\r\n// Rules (at least 5)\r\nif (maxPop > 0.6) adv.add('High rain probability (>60%): Avoid irrigation and pesticide spraying today.');\r\nif (maxTemp > 35) adv.add('High temperature (>35°C): Increase irrigation frequency for heat-sensitive crops.');\r\nif (maxWind > 15) adv.add('Strong winds (>15 km/h): Do not spray pesticides due to drift risk.');\r\nif (avgHum > 80) adv.add('High humidity (>80%): Monitor crops for possible fungal infections.');\r\n\r\n\r\n// Good spraying window: next 6 hours no rain and wind <10\r\nconst next6 = forecastList.slice(0, 2); // two 3-hour blocks\r\nconst rainIn6 = next6.some((f) => f.pop > 0.2);\r\nconst windIn6 = next6.some((f) => f.wind_speed >= 10);\r\nif (!rainIn6 && !windIn6) adv.add('Good spraying window in next 6 hours: low wind and low rain chance.');\r\n\r\n\r\n// Additional recommendation: irrigation scheduling\r\nif (maxTemp > 30 && avgHum < 40) adv.add('Heat + low humidity: Consider morning irrigation to reduce evapotranspiration.');\r\n\r\n\r\nreturn Array.from(adv);\r\n}"],"mappings":"AAAA;AACA,OAAO,SAASA,kBAAkBA,CAACC,YAAY,EAAE;EACjD;EACA;;EAGA,MAAMC,GAAG,GAAG,IAAIC,GAAG,CAAC,CAAC;;EAGrB;EACA,MAAMC,KAAK,GAAGH,YAAY,CAACI,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,CAAC;EAC7C,MAAMC,IAAI,GAAGP,YAAY,CAACI,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACG,QAAQ,CAAC;EAChD,MAAMC,IAAI,GAAGT,YAAY,CAACI,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACK,GAAG,CAAC;EAC3C,MAAMC,KAAK,GAAGX,YAAY,CAACI,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACO,UAAU,CAAC;EAGnD,MAAMC,OAAO,GAAGC,IAAI,CAACC,GAAG,CAAC,GAAGZ,KAAK,CAAC;EAClC,MAAMa,MAAM,GAAGT,IAAI,CAACU,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,GAAGC,CAAC,EAAE,CAAC,CAAC,GAAGZ,IAAI,CAACa,MAAM;EAC5D,MAAMC,MAAM,GAAGP,IAAI,CAACC,GAAG,CAAC,GAAGN,IAAI,CAAC;EAChC,MAAMa,OAAO,GAAGR,IAAI,CAACC,GAAG,CAAC,GAAGJ,KAAK,CAAC;;EAGlC;EACA,IAAIU,MAAM,GAAG,GAAG,EAAEpB,GAAG,CAACsB,GAAG,CAAC,8EAA8E,CAAC;EACzG,IAAIV,OAAO,GAAG,EAAE,EAAEZ,GAAG,CAACsB,GAAG,CAAC,mFAAmF,CAAC;EAC9G,IAAID,OAAO,GAAG,EAAE,EAAErB,GAAG,CAACsB,GAAG,CAAC,qEAAqE,CAAC;EAChG,IAAIP,MAAM,GAAG,EAAE,EAAEf,GAAG,CAACsB,GAAG,CAAC,qEAAqE,CAAC;;EAG/F;EACA,MAAMC,KAAK,GAAGxB,YAAY,CAACyB,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACxC,MAAMC,OAAO,GAAGF,KAAK,CAACG,IAAI,CAAEtB,CAAC,IAAKA,CAAC,CAACK,GAAG,GAAG,GAAG,CAAC;EAC9C,MAAMkB,OAAO,GAAGJ,KAAK,CAACG,IAAI,CAAEtB,CAAC,IAAKA,CAAC,CAACO,UAAU,IAAI,EAAE,CAAC;EACrD,IAAI,CAACc,OAAO,IAAI,CAACE,OAAO,EAAE3B,GAAG,CAACsB,GAAG,CAAC,qEAAqE,CAAC;;EAGxG;EACA,IAAIV,OAAO,GAAG,EAAE,IAAIG,MAAM,GAAG,EAAE,EAAEf,GAAG,CAACsB,GAAG,CAAC,gFAAgF,CAAC;EAG1H,OAAOM,KAAK,CAACC,IAAI,CAAC7B,GAAG,CAAC;AACtB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}